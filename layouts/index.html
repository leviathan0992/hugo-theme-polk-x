{{ define "main" }}
  {{ partial "header.html" . }}
  <section class="archive">
    <ul class="post-archive">
      {{- $all := where .Site.RegularPages "Section" "posts" -}}
      {{- $filtered := slice -}}
      {{- range $all -}}
        {{- if ne (partial "has_tag.html" (dict "page" . "tag" "draft")) "true" -}}
          {{- $filtered = $filtered | append . -}}
        {{- end -}}
      {{- end -}}
      {{- $filtered = sort $filtered "Date" "desc" -}}
      {{- $p := .Paginate $filtered -}}
      {{- range $p.Pages -}}
        <li class="post-item">
          <time class="post-date">{{ .Date.Format "2006-01-02" }}</time>
          <a class="post-title" href="{{ .RelPermalink }}">{{ .Title }}</a>
        </li>
      {{- end -}}
    </ul>
  </section>
  {{ partial "paginator.html" $p }}
  {{ partial "footer.html" . }}
{{ end }}
